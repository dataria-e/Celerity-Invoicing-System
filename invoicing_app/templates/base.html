<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ page_title }} | Celerity</title>
    <link
      href="https://cdn.jsdelivr.net/npm/@tabler/core@1.4.0/dist/css/tabler.min.css"
      rel="stylesheet"
    />
    <style>
      :root {
        --tblr-body-bg: #f4f6fa;
      }

      body {
        background: var(--tblr-body-bg);
      }

      .app-shell {
        min-height: 100vh;
      }

      .sidebar {
        width: 250px;
        box-sizing: border-box;
        position: fixed;
        top: 0;
        bottom: 0;
        left: 0;
        z-index: 1020;
        background-color: #fff;
        border-right: 1px solid #e6e7e9;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
      }

      .sidebar-brand {
        height: 60px;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0 1rem;
        border-bottom: 1px solid #e6e7e9;
        font-weight: 700;
        font-size: 1.15rem;
        color: #1e293b;
      }

      .brand-icon {
        width: 20px;
        height: 20px;
        stroke: #206bc4;
        flex: 0 0 20px;
      }

      .sidebar-nav {
        list-style: none;
        padding: 0.75rem 0;
        margin: 0;
      }

      .sidebar-nav-main {
        flex: 1;
      }

      .sidebar-nav-footer {
        border-top: 1px solid #e6e7e9;
      }

      .sidebar-nav-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.6rem 1rem;
        color: #626976;
        text-decoration: none;
        border-left: 3px solid transparent;
      }

      .sidebar-icon {
        width: 18px;
        height: 18px;
        stroke: currentColor;
        stroke-width: 2;
        flex: 0 0 18px;
      }

      .sidebar-nav-item.active .sidebar-icon {
        stroke-width: 2.4;
      }

      .sidebar-nav-item:hover {
        background-color: #f8f9fa;
        color: #1e293b;
      }

      .sidebar-nav-item.active {
        background-color: #f0f3ff;
        color: #206bc4;
        border-left-color: #206bc4;
        font-weight: 600;
      }

      .sidebar-nav-form {
        margin: 0;
      }

      .sidebar-nav-button {
        width: 100%;
        background: transparent;
        border: 0;
        text-align: left;
        cursor: pointer;
      }

      .main-content {
        margin-left: 250px;
        min-height: 100vh;
      }

      .topbar {
        height: 60px;
        background: #fff;
        border-bottom: 1px solid #e6e7e9;
        border-left: 1px solid #e6e7e9;
        margin-left: -1px;
        display: flex;
        align-items: center;
        padding: 0 1.25rem;
      }

      .page-content {
        padding: 1.25rem;
      }

      @media (max-width: 768px) {
        .sidebar {
          position: static;
          width: 100%;
          height: auto;
          border-right: 0;
          border-bottom: 1px solid #e6e7e9;
        }

        .main-content {
          margin-left: 0;
        }

        .topbar {
          border-left: 0;
          margin-left: 0;
        }
      }
    </style>
  </head>
  <body>
    <div class="app-shell">
      <aside class="sidebar">
        <div class="sidebar-brand">
          <svg xmlns="http://www.w3.org/2000/svg" class="brand-icon" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 21h18" />
            <path d="M7 16V9" />
            <path d="M12 16V5" />
            <path d="M17 16v-3" />
          </svg>
          <span>Celerity</span>
        </div>
        <ul class="sidebar-nav sidebar-nav-main">
          {% for item in [
            'Dashboard',
            'Items',
            'customers',
            'invoices',
            'Vendors',
            'Purcheases',
            'Assets',
            'Expenses',
            'Payment',
            'Report'
          ] %}
          <li>
            <a
              class="sidebar-nav-item {% if active_menu == item %}active{% endif %}"
              href="{% if item == 'Dashboard' %}{{ url_for('dashboard') }}{% elif item == 'Items' %}{{ url_for('items_page') }}{% elif item == 'customers' %}{{ url_for('customers_page') }}{% elif item == 'invoices' %}{{ url_for('invoices_page') }}{% elif item == 'Vendors' %}{{ url_for('vendors_page') }}{% elif item == 'Purcheases' %}{{ url_for('purchases_page') }}{% elif item == 'Assets' %}{{ url_for('assets_page') }}{% elif item == 'Expenses' %}{{ url_for('expenses_page') }}{% elif item == 'Payment' %}{{ url_for('payments_page') }}{% elif item == 'Report' %}{{ url_for('report_page') }}{% else %}#{% endif %}"
            >
              {% if item == 'Dashboard' %}
              <svg xmlns="http://www.w3.org/2000/svg" class="sidebar-icon" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 4h6v8H4z" />
                <path d="M14 4h6v5h-6z" />
                <path d="M14 13h6v7h-6z" />
                <path d="M4 16h6v4H4z" />
              </svg>
              {% elif item == 'Items' %}
              <svg xmlns="http://www.w3.org/2000/svg" class="sidebar-icon" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 2l9 4.9-9 4.9-9-4.9z" />
                <path d="M3 7l9 4.9 9-4.9" />
                <path d="M3 12l9 4.9 9-4.9" />
                <path d="M3 17l9 4.9 9-4.9" />
              </svg>
              {% elif item == 'customers' %}
              <svg xmlns="http://www.w3.org/2000/svg" class="sidebar-icon" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M8 7a4 4 0 1 0 0-8 4 4 0 0 0 0 8z" transform="translate(4 5)" />
                <path d="M4 20c0-3.314 3.134-6 7-6s7 2.686 7 6" />
              </svg>
              {% elif item == 'invoices' %}
              <svg xmlns="http://www.w3.org/2000/svg" class="sidebar-icon" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M7 3h10a2 2 0 0 1 2 2v14l-3-2-2 2-2-2-2 2-3-2V5a2 2 0 0 1 2-2z" />
                <path d="M9 8h6" />
                <path d="M9 12h6" />
              </svg>
              {% elif item == 'Vendors' %}
              <svg xmlns="http://www.w3.org/2000/svg" class="sidebar-icon" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 21h18" />
                <path d="M5 21V7l7-4 7 4v14" />
                <path d="M9 10h6" />
              </svg>
              {% elif item == 'Purcheases' %}
              <svg xmlns="http://www.w3.org/2000/svg" class="sidebar-icon" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M6 6h15l-1.5 8h-11z" />
                <path d="M6 6l-2-3H2" />
                <circle cx="9" cy="20" r="1" />
                <circle cx="18" cy="20" r="1" />
              </svg>
              {% elif item == 'Assets' %}
              <svg xmlns="http://www.w3.org/2000/svg" class="sidebar-icon" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 7l9-4 9 4-9 4z" />
                <path d="M3 12l9 4 9-4" />
                <path d="M3 17l9 4 9-4" />
              </svg>
              {% elif item == 'Expenses' %}
              <svg xmlns="http://www.w3.org/2000/svg" class="sidebar-icon" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 3h7v7" />
                <path d="M21 3l-9 9" />
                <path d="M5 7h4" />
                <path d="M5 11h7" />
                <path d="M5 15h5" />
              </svg>
              {% elif item == 'Payment' %}
              <svg xmlns="http://www.w3.org/2000/svg" class="sidebar-icon" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="5" width="18" height="14" rx="2" />
                <path d="M3 10h18" />
                <path d="M7 15h3" />
              </svg>
              {% elif item == 'Report' %}
              <svg xmlns="http://www.w3.org/2000/svg" class="sidebar-icon" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 19h16" />
                <path d="M7 16V9" />
                <path d="M12 16V5" />
                <path d="M17 16v-4" />
              </svg>
              {% endif %}
              {{ item }}
            </a>
          </li>
          {% endfor %}
        </ul>

        <ul class="sidebar-nav sidebar-nav-footer">
          <li>
            <a
              class="sidebar-nav-item {% if active_menu == 'Settings' %}active{% endif %}"
              href="{{ url_for('settings_page') }}"
            >
              <svg xmlns="http://www.w3.org/2000/svg" class="sidebar-icon" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3" />
                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33h0A1.65 1.65 0 0 0 9.91 3H10a2 2 0 0 1 4 0h.09a1.65 1.65 0 0 0 1 1.51h0a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v0A1.65 1.65 0 0 0 21 10.91V11a2 2 0 0 1 0 2h-.09a1.65 1.65 0 0 0-1.51 1z" />
              </svg>
              Settings
            </a>
          </li>
          <li>
            <a
              class="sidebar-nav-item {% if active_menu == 'Users' %}active{% endif %}"
              href="{{ url_for('users_page') }}"
            >
              <svg xmlns="http://www.w3.org/2000/svg" class="sidebar-icon" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M8 7a4 4 0 1 0 0-8 4 4 0 0 0 0 8z" transform="translate(4 5)" />
                <path d="M4 20c0-3.314 3.134-6 7-6s7 2.686 7 6" />
              </svg>
              Users
            </a>
          </li>
          <li>
            <form method="post" action="{{ url_for('logout') }}" class="sidebar-nav-form">
              <button type="submit" class="sidebar-nav-item sidebar-nav-button">
                <svg xmlns="http://www.w3.org/2000/svg" class="sidebar-icon" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M15 8l5 4-5 4" />
                  <path d="M20 12H9" />
                  <path d="M13 4H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8" />
                </svg>
                Logout
              </button>
            </form>
          </li>
        </ul>
      </aside>

      <main class="main-content">
        <div class="topbar">
          <h2 class="page-title mb-0">{{ page_title }}</h2>
        </div>
        <div class="page-content">{% block content %}{% endblock %}</div>
      </main>
    </div>

    <div class="modal modal-blur fade" id="globalConfirmModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Please Confirm</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p class="mb-0" id="globalConfirmMessage">Are you sure?</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-sm" data-bs-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-sm btn-danger" id="globalConfirmOk">Confirm</button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tabler/core@1.4.0/dist/js/tabler.min.js"></script>
    <script>
      (() => {
        const confirmModalEl = document.getElementById('globalConfirmModal');
        if (!confirmModalEl || typeof bootstrap === 'undefined') return;

        const confirmMessageEl = document.getElementById('globalConfirmMessage');
        const confirmOkBtn = document.getElementById('globalConfirmOk');
        const confirmModal = new bootstrap.Modal(confirmModalEl);
        let onConfirm = null;

        window.showHtmlConfirm = (message, callback) => {
          confirmMessageEl.textContent = message || 'Are you sure?';
          onConfirm = typeof callback === 'function' ? callback : null;
          confirmModal.show();
          return false;
        };

        window.showHtmlConfirmSubmit = (event, message) => {
          if (event) event.preventDefault();
          const source = event && event.target ? event.target : null;
          const form = source ? source.closest('form') : null;
          if (!form) return false;
          return window.showHtmlConfirm(message, () => form.submit());
        };

        confirmOkBtn.addEventListener('click', () => {
          confirmModal.hide();
          if (onConfirm) {
            const run = onConfirm;
            onConfirm = null;
            run();
          }
        });

        confirmModalEl.addEventListener('hidden.bs.modal', () => {
          onConfirm = null;
        });
      })();
    </script>
  </body>
</html>
